<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scratch.jl Documentation · Scratch.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Scratch.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Scratch.jl Documentation</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Macros"><span>Macros</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scratch.jl Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scratch.jl Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaPackaging/Scratch.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scratch.jl-Documentation"><a class="docs-heading-anchor" href="#Scratch.jl-Documentation">Scratch.jl Documentation</a><a id="Scratch.jl-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Scratch.jl-Documentation" title="Permalink"></a></h1><p>This is the reference documentation of <a href="https://github.com/JuliaPackaging/Scratch.jl"><code>Scratch.jl</code></a>.</p><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Scratch.clear_scratchspaces!-Tuple{Union{Nothing, Base.UUID, Module}}"><code>Scratch.clear_scratchspaces!</code></a></li><li><a href="#Scratch.clear_scratchspaces!-Tuple{}"><code>Scratch.clear_scratchspaces!</code></a></li><li><a href="#Scratch.delete_scratch!-Tuple{Union{Nothing, Base.UUID, Module}, AbstractString}"><code>Scratch.delete_scratch!</code></a></li><li><a href="#Scratch.get_scratch!"><code>Scratch.get_scratch!</code></a></li><li><a href="#Scratch.scratch_dir-Tuple"><code>Scratch.scratch_dir</code></a></li><li><a href="#Scratch.scratch_path-Tuple{Base.UUID, AbstractString}"><code>Scratch.scratch_path</code></a></li><li><a href="#Scratch.track_scratch_access-Tuple{Base.UUID, AbstractString}"><code>Scratch.track_scratch_access</code></a></li><li><a href="#Scratch.with_scratch_directory-Tuple{Function, String}"><code>Scratch.with_scratch_directory</code></a></li><li><a href="#Scratch.@get_scratch!-Tuple{Any}"><code>Scratch.@get_scratch!</code></a></li></ul><h2 id="Macros"><a class="docs-heading-anchor" href="#Macros">Macros</a><a id="Macros-1"></a><a class="docs-heading-anchor-permalink" href="#Macros" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Scratch.@get_scratch!-Tuple{Any}" href="#Scratch.@get_scratch!-Tuple{Any}"><code>Scratch.@get_scratch!</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@get_scratch!(key)</code></pre><p>Convenience macro that gets/creates a scratch space with the given key and parented to the package the calling module belongs to.  If the calling module does not belong to a package, (e.g. it is <code>Main</code>, <code>Base</code>, an anonymous module, etc...) the UUID will be taken to be <code>nothing</code>, creating a global scratchspace.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L293-L300">source</a></section></article><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Scratch.clear_scratchspaces!-Tuple{Union{Nothing, Base.UUID, Module}}" href="#Scratch.clear_scratchspaces!-Tuple{Union{Nothing, Base.UUID, Module}}"><code>Scratch.clear_scratchspaces!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">clear_scratchspaces!(parent_pkg::Union{Module,UUID})</code></pre><p>Delete all scratch spaces for the given package.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L270-L274">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Scratch.clear_scratchspaces!-Tuple{}" href="#Scratch.clear_scratchspaces!-Tuple{}"><code>Scratch.clear_scratchspaces!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">clear_scratchspaces!()</code></pre><p>Delete all scratch spaces in the current depot.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L259-L263">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Scratch.delete_scratch!-Tuple{Union{Nothing, Base.UUID, Module}, AbstractString}" href="#Scratch.delete_scratch!-Tuple{Union{Nothing, Base.UUID, Module}, AbstractString}"><code>Scratch.delete_scratch!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">delete_scratch!(parent_pkg, key)</code></pre><p>Explicitly deletes a scratch space created through <code>get_scratch!()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L245-L249">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Scratch.get_scratch!" href="#Scratch.get_scratch!"><code>Scratch.get_scratch!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_scratch!(parent_pkg = nothing, key::AbstractString, calling_pkg = parent_pkg)</code></pre><p>Returns the path to (or creates) a space.</p><p>If <code>parent_pkg</code> is given (either as a <code>UUID</code> or as a <code>Module</code>), the scratch space is namespaced with that package&#39;s UUID, so that it will not conflict with any other space with the same name but a different parent package UUID.  The space&#39;s lifecycle is tied to the calling package, allowing the space to be garbage collected if all versions of the package that used it have been removed.  By default, <code>parent_pkg</code> and <code>calling_pkg</code> are the same, however in rare cases a package may become dependent on a scratch space that is namespaced within another package, in such cases they should identify themselves as the <code>calling_pkg</code> so that the scratch space&#39;s lifecycle is tied to that calling package.</p><p>If <code>parent_pkg</code> is not defined, or is a <code>Module</code> without a root UUID (e.g. <code>Main</code>, <code>Base</code>, an anonymous module, etc...) the created scratch space is namespaced within the global environment for the current version of Julia.</p><p>Scratch spaces are removed if all calling projects that have accessed them are removed. As an example, if a scratch space is used by two versions of the same package but not a newer version, when the two older versions are removed the scratch space may be garbage collected.  See <code>Pkg.gc()</code> and <code>track_scratch_access()</code> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L202-L224">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Scratch.scratch_dir-Tuple" href="#Scratch.scratch_dir-Tuple"><code>Scratch.scratch_dir</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">scratch_dir(args...)</code></pre><p>Returns a path within the current depot&#39;s <code>scratchspaces</code> directory.  This location can be overridden via <code>with_scratch_directory()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L25-L30">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Scratch.scratch_path-Tuple{Base.UUID, AbstractString}" href="#Scratch.scratch_path-Tuple{Base.UUID, AbstractString}"><code>Scratch.scratch_path</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">scratch_path(pkg_uuid, key)</code></pre><p>Common utility function to return the path of a scratch space, keyed by the given parameters.  Users should use <code>get_scratch!()</code> for most user-facing usage.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L72-L77">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Scratch.track_scratch_access-Tuple{Base.UUID, AbstractString}" href="#Scratch.track_scratch_access-Tuple{Base.UUID, AbstractString}"><code>Scratch.track_scratch_access</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">track_scratch_access(pkg_uuid, scratch_path)</code></pre><p>We need to keep track of who is using which spaces, so we know when it is advisable to remove them during a GC.  We do this by attributing accesses of spaces to <code>Project.toml</code> files in much the same way that package versions themselves are logged upon install, only instead of having the project information implicitly available, we must rescue it out from the currently-active Pkg Env.  If we cannot do that, it is because someone is doing something weird like opening a space for a Pkg UUID that is not loadable, which we will simply not track; that space will be reaped after the appropriate time in an orphanage.</p><p>If <code>pkg_uuid</code> is explicitly set to <code>nothing</code>, this space is treated as belonging to the current project, or if that does not exist, the default global project located at <code>Base.load_path_expand(&quot;@v#.#&quot;)</code>.</p><p>While package and artifact access tracking can be done at <code>add()</code>/<code>instantiate()</code> time, we must do it at access time for spaces, as we have no declarative list of spaces that a package may or may not access throughout its lifetime.  To avoid building up a ludicrously large number of accesses through programs that e.g. call <code>get_scratch!()</code> in a loop, we only write out usage information for each space once per day at most.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L88-L108">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Scratch.with_scratch_directory-Tuple{Function, String}" href="#Scratch.with_scratch_directory-Tuple{Function, String}"><code>Scratch.with_scratch_directory</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">with_scratch_directory(f::Function, scratch_dir::String)</code></pre><p>Helper function to allow temporarily changing the scratch space directory.  When this is set, no other directory will be searched for spaces, and new spaces will be created within this directory.  Similarly, removing a scratch space will only effect the given scratch directory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPackaging/Scratch.jl/blob/e127cd7ffd2b7b318f835d3e6d82eeeb39787079/src/Scratch.jl#L8-L15">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 2 November 2023 09:35">Thursday 2 November 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
